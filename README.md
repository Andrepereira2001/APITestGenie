# APITestGenie
Replication package for API Test Genie, an LLM-based approach to generate integration tests based on API specification and Business Requirements.

This project utilizes LangChain and LLMs to autonomously generate TypeScript tests (using Jest) for your code.

## Project strucuture

In the replication package, we present a structured way to test two web services, (i) [PetShop](https://petstore.swagger.io/) and (ii) [CatFact](https://catfact.ninja/)

The `./user_stories` folder contains two example Business Requirements used by the package to generate an executable test script.
The API specification is retrieved directly from the available documentation on the web. 
The `./src/main.py` file contains more information regarding the used web services:

```py
PETSHOP = {
    "api": "https://petstore.swagger.io/v2/swagger.json",
    "user_story": "./user_stories/pet_shop.txt"
}

CATFACT = {
    "api": "https://catfact.ninja/docs?api-docs.json",
    "user_story": "./user_stories/cat_fact.txt"
}
```

## Usage

The project uses docker and docker-compose, ensuring a reproducible enviroment across different operating systems.
Please, ensure that you have both tools installed in your system before proceeding.

1. Specify the `OPENAI_API_KEY` key: - Open the `.env` file.
    - Add a valid `open_api_key` as an environment variable

2. Generate a test for a `web_service`, which can either be `catFact` or `petShop`:

```sh
docker-compose run --rm gen <web_service>
```

3. Execute the generated tests in the jest environment.

```sh
docker-compose run --rm exec
```


## Generation Output

All the information provided to the LLM will be available in the `test_output` file where:
- `prompt.txt` is the prompt provided to the LLM to generate the integration test.
- `generation.txt` is all the content generated by the LLM.
- `test.ts` is the parsed generated test to be executed in the Jest environment.

## Contributions

Thanks to everyone that contributed to this project, especially:

Bruno Lima (Advisor) https://scholar.google.pt/citations?user=8W81bQUAAAAJ&hl=en

Jo√£o Pascoal Faria (Co-Advisor) https://scholar.google.com/citations?user=osCQrkQAAAAJ&hl=en
