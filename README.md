# APITestGenie
Replication package for API Test Genie, an LLM-based approach to generate integration tests based on API specification and Business Requirements.

This project utilizes LangChain and LLMs to autonomously generate TypeScript tests (using Jest) for your code.

## Project strucuture

In the replication package, we present a structured way to test two web services, (i) [PetShop](https://petstore.swagger.io/) and (ii) [CatFact](https://catfact.ninja/)

The `./user_stories` folder contains two example Business Requirements used by the package to generate an executable test script.
The API specification is retrieved directly from the available documentation on the web. 
The `./src/main.py` file contains more information regarding the used web services:

```py
PETSHOP = {
    "api": "https://petstore.swagger.io/v2/swagger.json",
    "user_story": "./user_stories/pet_shop.txt"
}

CATFACT = {
    "api": "https://catfact.ninja/docs?api-docs.json",
    "user_story": "./user_stories/cat_fact.txt"
}
```

## Configuration

The replication package uses node `v10.5.0` and python `v3.12.4`. 

It can be executed both in Windows and macOS following the respective instructions:

### Windows

#### Setup Environment

1. Create a virtual environment:
   ```
   py -m venv venv
   ```

2. Activate the virtual environment:
   ```
   venv\Scripts\activate
   ```

3. Install dependencies:
   ```
   py -m pip install -r requirements.txt
   ```

4. Specify the OPENAI_API_KEY key:
    - Open the `.env` file.
    - Add a valid `open_api_key` as an environment variable

#### Generate Test

1. Run the main script where the `\<web_service>` can either be `catFact` or `petShop`:
   ```
   py src/main.py <web_service>
   ```

#### Exectute Test

1. Install dependencies:
   ```
   npm install --save
   ```

2. Execute generated test:
   ```
   npm test
   ```

### MacOs

#### Setup Environment

TBD

#### Generate Test

TBD

#### Exectute Test

TBD


## Generation Output

All the information provided to the LLM will be available in the `test_output` file where:
- `prompt.txt` is the prompt provided to the LLM to generate the integration test.
- `generation.txt` is all the content generated by the LLM.
- `test.ts` is the parsed generated test to be executed in the Jest environment.

